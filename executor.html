<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>АКАЛАН — Кабинет исполнителя</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="header">
        <div class="container header__container">
            <div class="header__logo">
                <a href="index.html">АКАЛАН</a>
            </div>
            <div class="header__buttons">
                <a href="index.html" class="btn btn-outline home-btn" title="На главную">
                    <i class="fas fa-home"></i> <span class="home-text">Главная</span>
                </a>
                <a href="auth.html" class="btn btn-primary">Выйти</a>
            </div>
            <input type="checkbox" id="burger-toggle" class="burger-toggle">
            <label for="burger-toggle" class="burger-icon"><i class="fas fa-bars"></i></label>
            <div class="header__nav-wrapper">
                <nav class="header__nav">
                    <ul class="nav-list">
                        <li><a href="#overview" class="nav-link">Обзор</a></li>
                        <li><a href="#orders" class="nav-link">Заказы</a></li>
                        <li><a href="#chat" class="nav-link">Чат</a></li>
                        <li><a href="#profile" class="nav-link">Профиль</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main class="executor-main">
        <div class="container">
            <!-- Приветствие -->
            <div class="executor-welcome">
                <h1>Здравствуйте, Алексей!</h1>
                <p>Это ваш личный кабинет исполнителя. Здесь вы можете управлять заказами, общаться с заказчиками и настраивать профиль.</p>
            </div>

            <!-- Вкладки (табы) -->
            <div class="executor-tabs">
                <button class="executor-tab active" data-tab="overview">Обзор</button>
                <button class="executor-tab" data-tab="orders">Мои заказы</button>
                <button class="executor-tab" data-tab="chat">Чат</button>
                <button class="executor-tab" data-tab="profile">Профиль</button>
            </div>

            <!-- Содержимое вкладок -->
            <div class="executor-content">
                <!-- Обзор (статистика) -->
                <div class="tab-pane active" id="overview">
                    <h2>Обзор</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon"><i class="fas fa-clipboard-list"></i></div>
                            <div class="stat-info">
                                <span class="stat-value">12</span>
                                <span class="stat-label">Активных заказов</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon"><i class="fas fa-check-circle"></i></div>
                            <div class="stat-info">
                                <span class="stat-value">47</span>
                                <span class="stat-label">Выполнено</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon"><i class="fas fa-star"></i></div>
                            <div class="stat-info">
                                <span class="stat-value">4.8</span>
                                <span class="stat-label">Рейтинг</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon"><i class="fas fa-envelope"></i></div>
                            <div class="stat-info">
                                <span class="stat-value">3</span>
                                <span class="stat-label">Новых сообщения</span>
                            </div>
                        </div>
                    </div>
                    <!-- Последние заказы (кратко) -->
                    <h3>Последние заказы</h3>
                    <div class="recent-orders">
                        <div class="order-card">
                            <div class="order-header">
                                <span class="order-title">Разработка лендинга</span>
                                <span class="order-status status-active">В работе</span>
                            </div>
                            <div class="order-meta">Заказчик: ООО «Ромашка» · Бюджет: 30 000 ₽</div>
                        </div>
                        <div class="order-card">
                            <div class="order-header">
                                <span class="order-title">Настройка CRM</span>
                                <span class="order-status status-pending">Ожидает старта</span>
                            </div>
                            <div class="order-meta">Заказчик: ИП Иванов · Бюджет: 15 000 ₽</div>
                        </div>
                        <div class="order-card">
                            <div class="order-header">
                                <span class="order-title">Аудит безопасности</span>
                                <span class="order-status status-completed">Завершён</span>
                            </div>
                            <div class="order-meta">Заказчик: ООО «ТехноСервис» · Бюджет: 25 000 ₽</div>
                        </div>
                    </div>
                </div>

                <!-- Мои заказы (полный список) -->
                <div class="tab-pane" id="orders">
                    <h2>Мои заказы</h2>
                    <div class="orders-list">
                        <!-- Здесь будет динамический список заказов -->
                    </div>
                </div>

                <!-- Чат -->
                <div class="tab-pane" id="chat">
                    <h2>Чат с заказчиками</h2>
                    <div class="chat-container">
                        <!-- Список диалогов -->
                        <div class="chat-sidebar">
                            <div class="chat-search">
                                <input type="text" placeholder="Поиск собеседника...">
                            </div>
                            <div class="chat-contacts">
                                <div class="chat-contact active" data-contact="ivan">
                                    <img src="https://i.pravatar.cc/40?img=1" alt="Avatar" class="contact-avatar">
                                    <div class="contact-info">
                                        <span class="contact-name">Иван Петров</span>
                                        <span class="contact-last-msg">Когда приступите?</span>
                                    </div>
                                    <span class="contact-time">15:30</span>
                                </div>
                                <div class="chat-contact" data-contact="olga">
                                    <img src="https://i.pravatar.cc/40?img=2" alt="Avatar" class="contact-avatar">
                                    <div class="contact-info">
                                        <span class="contact-name">Ольга Смирнова</span>
                                        <span class="contact-last-msg">Спасибо за работу!</span>
                                    </div>
                                    <span class="contact-time">Вчера</span>
                                </div>
                                <div class="chat-contact" data-contact="mikhail">
                                    <img src="https://i.pravatar.cc/40?img=3" alt="Avatar" class="contact-avatar">
                                    <div class="contact-info">
                                        <span class="contact-name">Михаил Козлов</span>
                                        <span class="contact-last-msg">Нужно обсудить детали</span>
                                    </div>
                                    <span class="contact-time">12.05</span>
                                </div>
                            </div>
                        </div>
                        <!-- Окно чата -->
                        <div class="chat-window">
                            <div class="chat-header">
                                <img src="https://i.pravatar.cc/40?img=1" alt="Avatar" class="chat-avatar">
                                <span class="chat-with">Иван Петров</span>
                                <button class="chat-back-btn"><i class="fas fa-arrow-left"></i></button>
                            </div>
                            <div class="chat-messages" id="chatMessages">
                                <!-- Сообщения будут добавляться сюда динамически -->
                            </div>
                            <div class="chat-input-area">
                                <input type="text" placeholder="Напишите сообщение..." id="chatInput">
                                <button id="sendMessageBtn"><i class="fas fa-paper-plane"></i></button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Профиль (заглушка) -->
                <div class="tab-pane" id="profile">
                    <h2>Профиль</h2>
                    <p>Здесь будет форма редактирования профиля, навыки, портфолио и т.д.</p>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container footer__container">
            <!-- Подвал можно скопировать с главной или оставить минимальным -->
            <div class="footer__col">
                <h4>АКАЛАН</h4>
                <p>Биржа IT‑услуг<br>Работаем по всей России</p>
            </div>
            <div class="footer__col">
                <h4>Контактная информация</h4>
                <p><i class="fas fa-envelope"></i> support@akalan.ru</p>
                <p><i class="fas fa-phone-alt"></i> +7 (800) 123-45-67</p>
            </div>
            <div class="footer__col">
                <h4>Дополнительно</h4>
                <ul>
                    <li><a href="#">О нас</a></li>
                    <li><a href="#">Вакансии</a></li>
                    <li><a href="#">Помощь</a></li>
                </ul>
            </div>
        </div>
        <div class="footer__bottom">
            <p>&copy; 2026 АКАЛАН. Все права защищены.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Переключение вкладок
            const tabs = document.querySelectorAll('.executor-tab');
            const panes = document.querySelectorAll('.tab-pane');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const targetId = tab.dataset.tab;
                    // Деактивировать все табы и панели
                    tabs.forEach(t => t.classList.remove('active'));
                    panes.forEach(p => p.classList.remove('active'));

                    tab.classList.add('active');
                    document.getElementById(targetId).classList.add('active');

                    // Если переключились на чат, можно сбросить активный контакт на первый
                    if (targetId === 'chat') {
                        const firstContact = document.querySelector('.chat-contact');
                        if (firstContact) {
                            document.querySelectorAll('.chat-contact').forEach(c => c.classList.remove('active'));
                            firstContact.classList.add('active');
                            updateChatHeader(firstContact);
                            loadMessages(firstContact.dataset.contact);
                        }
                    }
                });
            });

            // Работа чата
            const contacts = document.querySelectorAll('.chat-contact');
            const chatMessages = document.getElementById('chatMessages');
            const chatInput = document.getElementById('chatInput');
            const sendBtn = document.getElementById('sendMessageBtn');
            const chatHeader = document.querySelector('.chat-header .chat-with');
            const chatAvatar = document.querySelector('.chat-header .chat-avatar');
            const backBtn = document.querySelector('.chat-back-btn');
            const chatSidebar = document.querySelector('.chat-sidebar');
            const chatWindow = document.querySelector('.chat-window');

            // Данные сообщений для разных контактов (имитация)
            const messagesData = {
                ivan: [
                    { from: 'ivan', text: 'Здравствуйте! Когда сможете приступить к задаче?', time: '15:20' },
                    { from: 'me', text: 'Добрый день! Могу начать завтра утром.', time: '15:22' },
                    { from: 'ivan', text: 'Отлично, договорились.', time: '15:30' }
                ],
                olga: [
                    { from: 'olga', text: 'Спасибо за работу!', time: 'Вчера' },
                    { from: 'me', text: 'Пожалуйста, обращайтесь!', time: 'Вчера' }
                ],
                mikhail: [
                    { from: 'mikhail', text: 'Нужно обсудить детали по проекту.', time: '12.05' },
                    { from: 'me', text: 'Да, конечно. Когда вам удобно?', time: '12.05' }
                ]
            };

            // Активный контакт
            let activeContact = 'ivan';

            // Загрузка сообщений для контакта
            function loadMessages(contactId) {
                chatMessages.innerHTML = '';
                const messages = messagesData[contactId] || [];
                messages.forEach(msg => {
                    const msgDiv = document.createElement('div');
                    msgDiv.classList.add('chat-message');
                    msgDiv.classList.add(msg.from === 'me' ? 'my-message' : 'their-message');
                    msgDiv.innerHTML = `
                        <div class="message-content">${msg.text}</div>
                        <div class="message-time">${msg.time}</div>
                    `;
                    chatMessages.appendChild(msgDiv);
                });
                // Прокрутка вниз
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            // Обновление заголовка чата
            function updateChatHeader(contactElement) {
                const name = contactElement.querySelector('.contact-name').innerText;
                const avatarSrc = contactElement.querySelector('.contact-avatar').src;
                chatHeader.innerText = name;
                chatAvatar.src = avatarSrc;
            }

            // Обработка клика по контакту
            contacts.forEach(contact => {
                contact.addEventListener('click', () => {
                    contacts.forEach(c => c.classList.remove('active'));
                    contact.classList.add('active');
                    activeContact = contact.dataset.contact;
                    updateChatHeader(contact);
                    loadMessages(activeContact);

                    // На мобильных устройствах после выбора контакта показываем окно чата
                    if (window.innerWidth <= 768) {
                        chatSidebar.style.display = 'none';
                        chatWindow.style.display = 'flex';
                    }
                });
            });

            // Кнопка "назад" на мобильных (возврат к списку контактов)
            backBtn.addEventListener('click', () => {
                chatSidebar.style.display = 'flex';
                chatWindow.style.display = 'none';
            });

            // Отправка сообщения
            function sendMessage() {
                const text = chatInput.value.trim();
                if (text === '') return;

                // Добавляем в данные (для демо)
                if (!messagesData[activeContact]) {
                    messagesData[activeContact] = [];
                }
                const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                messagesData[activeContact].push({ from: 'me', text: text, time: time });

                // Добавляем в DOM
                const msgDiv = document.createElement('div');
                msgDiv.classList.add('chat-message', 'my-message');
                msgDiv.innerHTML = `
                    <div class="message-content">${text}</div>
                    <div class="message-time">${time}</div>
                `;
                chatMessages.appendChild(msgDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;

                // Очищаем поле
                chatInput.value = '';

                // Обновляем последнее сообщение в списке контактов
                const activeContactElem = document.querySelector(`.chat-contact[data-contact="${activeContact}"]`);
                if (activeContactElem) {
                    const lastMsgSpan = activeContactElem.querySelector('.contact-last-msg');
                    if (lastMsgSpan) lastMsgSpan.innerText = text;
                }
            }

            sendBtn.addEventListener('click', sendMessage);
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    sendMessage();
                }
            });

            // Инициализация при загрузке страницы: загружаем сообщения для первого контакта
            const firstContact = document.querySelector('.chat-contact');
            if (firstContact) {
                firstContact.classList.add('active');
                updateChatHeader(firstContact);
                loadMessages(firstContact.dataset.contact);
            }

            // На мобильных устройствах изначально показываем список контактов
            if (window.innerWidth <= 768) {
                chatWindow.style.display = 'none';
                chatSidebar.style.display = 'flex';
            } else {
                chatSidebar.style.display = 'flex';
                chatWindow.style.display = 'flex';
            }

            // Динамическая подгрузка заказов (заглушка)
            const ordersList = document.querySelector('#orders .orders-list');
            if (ordersList) {
                const dummyOrders = [
                    { title: 'Разработка лендинга', customer: 'ООО «Ромашка»', budget: 30000, status: 'В работе' },
                    { title: 'Настройка CRM', customer: 'ИП Иванов', budget: 15000, status: 'Ожидает старта' },
                    { title: 'Аудит безопасности', customer: 'ООО «ТехноСервис»', budget: 25000, status: 'Завершён' },
                    { title: 'Интеграция API', customer: 'Стартап “Фудтех”', budget: 40000, status: 'В работе' },
                ];
                dummyOrders.forEach(order => {
                    const card = document.createElement('div');
                    card.className = 'order-card';
                    card.innerHTML = `
                        <div class="order-header">
                            <span class="order-title">${order.title}</span>
                            <span class="order-status status-${order.status === 'В работе' ? 'active' : (order.status === 'Ожидает старта' ? 'pending' : 'completed')}">${order.status}</span>
                        </div>
                        <div class="order-meta">Заказчик: ${order.customer} · Бюджет: ${order.budget} ₽</div>
                    `;
                    ordersList.appendChild(card);
                });
            }
        });
    </script>
</body>
</html>